<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Алексей Пирогов" />
  <meta name="author" content="Hexlet" />
  <title>Функциональный дизайн и паттерны ФП</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="slideous/slideous.css" />
  <script src="slideous/slideous.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div id="statusbar">
<span style="float:right;">
<span style="margin-right:4em;font-weight:bold;"><span id="slideidx"></span> of {$slidecount}</span>
<button id="homebutton" title="first slide">1</button>
<button id="prevslidebutton" title="previous slide">&laquo;</button>
<button id="previtembutton" title="previous item">&lsaquo;</button>
<button id="nextitembutton" title="next item">&rsaquo;</button>
<button id="nextslidebutton" title="next slide">&raquo;</button>
<button id="endbutton" title="last slide">{$slidecount}</button>
<button id="incfontbutton" title="content">A+</button>
<button id="decfontbutton" title="first slide">A-</button>
<select id="tocbox" size="1"><option></option></select>
</span>
<span id="eos">&frac12;</span>
<span title="{$location}, {$date}">{$title}, {$author}</span>
</div>
<div class="slide titlepage">
  <h1 class="title">Функциональный дизайн и паттерны ФП</h1>
  <p class="author">
Алексей Пирогов<br/>Hexlet
  </p>
</div>
<div id="функциональное-программирование-кратко" class="slide section level1">
<h1>Функциональное программирование кратко</h1>
<ul>
<li>Функции — это значения</li>
<li>Композируем всё</li>
</ul>
</div>
<div id="функциизначения" class="slide section level1">
<h1>Функции–значения</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="fu">map</span><span class="ot">    ::</span> (a <span class="ot">-&gt;</span> b)    <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [b]</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="fu">filter</span><span class="ot"> ::</span> (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>) <span class="ot">-&gt;</span> [a] <span class="ot">-&gt;</span> [a]</a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="ot">(.)    ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> (b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> c)</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="fu">flip</span><span class="ot">   ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> (b <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> c)</a></code></pre></div>
</div>
<div id="каррирование" class="slide section level1">
<h1>Каррирование</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="ot">add     ::</span> (<span class="dt">Int</span>, <span class="dt">Int</span>)    <span class="ot">-&gt;</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="fu">div</span><span class="ot">     ::</span> (<span class="dt">Int</span>, <span class="dt">Int</span>)    <span class="ot">-&gt;</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5">add (<span class="dv">12</span>, <span class="dv">30</span>) <span class="co">-- 42</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="fu">curry</span><span class="ot">   ::</span> ((a, b) <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c)</a>
<a class="sourceLine" id="cb2-8" title="8"><span class="fu">uncurry</span><span class="ot"> ::</span> (a <span class="ot">-&gt;</span> b <span class="ot">-&gt;</span> c) <span class="ot">-&gt;</span> ((a, b) <span class="ot">-&gt;</span> c)</a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="fu">curry</span><span class="ot"> add ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span></a></code></pre></div>
</div>
<div id="частичное-применение" class="slide section level1">
<h1>Частичное применение</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb3-1" title="1"><span class="co">;; Clojure</span></a>
<a class="sourceLine" id="cb3-2" title="2">(<span class="bu">def</span><span class="fu"> add5 </span>(<span class="kw">partial</span> <span class="kw">+</span> <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb3-3" title="3"></a>
<a class="sourceLine" id="cb3-4" title="4">(add5 <span class="dv">10</span>) <span class="co">;; 15</span></a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb4-2" title="2">add5 <span class="ot">=</span> <span class="fu">curry</span> add <span class="dv">5</span></a>
<a class="sourceLine" id="cb4-3" title="3">add5 <span class="ot">=</span> (<span class="op">+</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb4-4" title="4"></a>
<a class="sourceLine" id="cb4-5" title="5">twoDividedBy <span class="ot">=</span> <span class="fu">flip</span> <span class="fu">div</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb4-6" title="6">twoDividedBy <span class="ot">=</span> (<span class="dv">2</span> <span class="op">/</span>)</a></code></pre></div>
</div>
<div id="соединяем-функции" class="slide section level1">
<h1>Соединяем функции</h1>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" title="1"><span class="ot">circle ::</span> <span class="dt">Float</span>             <span class="ot">-&gt;</span> <span class="dt">Shape</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="ot">filled ::</span> <span class="dt">Color</span>    <span class="ot">-&gt;</span> <span class="dt">Shape</span> <span class="ot">-&gt;</span> <span class="dt">Image</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="ot">scaled ::</span> <span class="dt">Float</span>             <span class="ot">-&gt;</span> <span class="dt">Image</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="ot">moved  ::</span> <span class="dt">Position</span> <span class="ot">-&gt;</span> <span class="dt">Image</span> <span class="ot">-&gt;</span> <span class="dt">Image</span></a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="ot">($) ::</span> (a <span class="ot">-&gt;</span> b) <span class="ot">-&gt;</span> a <span class="ot">-&gt;</span> b</a>
<a class="sourceLine" id="cb5-7" title="7"></a>
<a class="sourceLine" id="cb5-8" title="8">moved <span class="dt">TopLeftCorner</span>  <span class="co">-- moved TopLeftCorner</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="op">$</span> scaled <span class="fl">2.0</span>       <span class="co">--   ( scaled 2.0</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="op">$</span> filled <span class="dt">Red</span>     <span class="co">--     ( filled Red</span></a>
<a class="sourceLine" id="cb5-11" title="11">      <span class="op">$</span> circle <span class="dv">200</span>   <span class="co">--       ( circle 200 ) ) )</span></a></code></pre></div>
</div>
<div id="соединяем-функции-1" class="slide section level1">
<h1>Соединяем функции</h1>
<pre class="elm"><code>-- Elm
circle 200
  |&gt; fill Red
  |&gt; scale 2.0
  |&gt; move TopLeftCorner
</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb7-1" title="1"><span class="co">;; Clojure</span></a>
<a class="sourceLine" id="cb7-2" title="2">(<span class="kw">-&gt;&gt;</span> (circle <span class="dv">200</span>)</a>
<a class="sourceLine" id="cb7-3" title="3">  (fill <span class="at">:red</span>)</a>
<a class="sourceLine" id="cb7-4" title="4">  (scale <span class="fl">2.0</span>)</a>
<a class="sourceLine" id="cb7-5" title="5">  (move <span class="at">:top-left-corner</span>))</a></code></pre></div>
</div>
<div id="композиция-функций" class="slide section level1">
<h1>Композиция функций</h1>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb8-2" title="2">f x <span class="ot">=</span> g  (h  (k x))</a>
<a class="sourceLine" id="cb8-3" title="3">f x <span class="ot">=</span> g <span class="op">$</span> h <span class="op">$</span> k x</a>
<a class="sourceLine" id="cb8-4" title="4">f   <span class="ot">=</span> g <span class="op">.</span> h <span class="op">.</span> k</a></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb9-1" title="1"><span class="co">;; Clojure</span></a>
<a class="sourceLine" id="cb9-2" title="2">(<span class="bu">defn</span><span class="fu"> f </span>[x]         (g (h (k x))))</a>
<a class="sourceLine" id="cb9-3" title="3">(<span class="bu">def</span><span class="fu">  f     </span>(compose g  h  k))</a></code></pre></div>
</div>
<div id="композиция-функций-нескольких-аргументов" class="slide section level1">
<h1>Композиция функций нескольких аргументов</h1>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb10-2" title="2">f x y <span class="ot">=</span> g  (h x  (k y))</a>
<a class="sourceLine" id="cb10-3" title="3">f x   <span class="ot">=</span> g <span class="op">.</span> h x <span class="op">.</span> k</a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode clojure"><code class="sourceCode clojure"><a class="sourceLine" id="cb11-1" title="1"><span class="co">;; Clojure</span></a>
<a class="sourceLine" id="cb11-2" title="2">(<span class="bu">defn</span><span class="fu"> f </span>[x y]         (g         (h x (k y))))</a>
<a class="sourceLine" id="cb11-3" title="3">(<span class="bu">defn</span><span class="fu"> f </span>[x]   (compose g (<span class="kw">partial</span> h x) k))</a></code></pre></div>
</div>
<div id="паттерны-наконец" class="slide section level1">
<h1>Паттерны, наконец</h1>
<h2 id="паттерны-наконец-1">Паттерны, наконец</h2>
</div>
<div id="bracket" class="slide section level1">
<h1>"bracket"</h1>
<h2 id="bracket-работа-с-ресурсами">"bracket" — работа с ресурсами</h2>
</div>
<div id="bracket-1" class="slide section level1">
<h1>"bracket"</h1>
<div class="sourceCode" id="cb12"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb12-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb12-2" title="2">bracket</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="ot">  ::</span> <span class="dt">IO</span> a        <span class="co">-- выделение ресурса</span></a>
<a class="sourceLine" id="cb12-4" title="4">  <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">IO</span> b) <span class="co">-- освобождение ресурса</span></a>
<a class="sourceLine" id="cb12-5" title="5">  <span class="ot">-&gt;</span> (a <span class="ot">-&gt;</span> <span class="dt">IO</span> c) <span class="co">-- потребление ресурса</span></a>
<a class="sourceLine" id="cb12-6" title="6"></a>
<a class="sourceLine" id="cb12-7" title="7">withDB conn <span class="ot">=</span></a>
<a class="sourceLine" id="cb12-8" title="8">  bracket (connectDB conn) closeDB</a>
<a class="sourceLine" id="cb12-9" title="9"></a>
<a class="sourceLine" id="cb12-10" title="10">withLogger level <span class="ot">=</span></a>
<a class="sourceLine" id="cb12-11" title="11">  bracket (initLogger level) closeLogger</a></code></pre></div>
</div>
<div id="bracket-2" class="slide section level1">
<h1>"bracket"</h1>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb13-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">data</span> <span class="dt">Env</span> <span class="ot">=</span> <span class="dt">Env</span></a>
<a class="sourceLine" id="cb13-3" title="3">  {<span class="ot"> db     ::</span> <span class="dt">DB</span></a>
<a class="sourceLine" id="cb13-4" title="4">  ,<span class="ot"> logger ::</span> <span class="dt">Logger</span> }</a>
<a class="sourceLine" id="cb13-5" title="5"></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="ot">run ::</span> <span class="dt">Env</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> ()</a>
<a class="sourceLine" id="cb13-7" title="7"></a>
<a class="sourceLine" id="cb13-8" title="8">main <span class="ot">=</span></a>
<a class="sourceLine" id="cb13-9" title="9">  withDB <span class="st">&quot;dev&quot;</span> <span class="op">$</span> \db <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb13-10" title="10">    withLogger <span class="dt">Debug</span> <span class="op">$</span> \logger <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb13-11" title="11">      run <span class="dt">Env</span>{ db <span class="ot">=</span> db, logger <span class="ot">=</span> logger }</a></code></pre></div>
</div>
<div id="reader" class="slide section level1">
<h1>Reader</h1>
<h2 id="reader-также-известный-как-окружение">Reader, также известный как Окружение</h2>
</div>
<div id="reader-1" class="slide section level1">
<h1>Reader</h1>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb14-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="ot">prepareData ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Input</span>  <span class="ot">-&gt;</span> <span class="dt">Data</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="ot">calculate   ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Data</span>   <span class="ot">-&gt;</span> <span class="dt">Result</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="ot">plotResult  ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Result</span> <span class="ot">-&gt;</span> <span class="dt">Image</span></a></code></pre></div>
</div>
<div id="reader-2" class="slide section level1">
<h1>Reader</h1>
<div class="sourceCode" id="cb15"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb15-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="ot">plotInput ::</span> <span class="dt">Settings</span> <span class="ot">-&gt;</span> <span class="dt">Input</span> <span class="ot">-&gt;</span> <span class="dt">Image</span></a>
<a class="sourceLine" id="cb15-3" title="3">plotInput <span class="ot">=</span> runReader</a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="op">$</span> plotResult <span class="op">&lt;=&lt;</span> calculate <span class="op">&lt;=&lt;</span> prepareData</a></code></pre></div>
</div>
<div id="state" class="slide section level1">
<h1>State</h1>
<h2 id="state-или-изменяемое-состояние">State, или изменяемое состояние</h2>
</div>
<div id="state-1" class="slide section level1">
<h1>State</h1>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb16-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="ot">items   ::</span> <span class="dt">CharId</span> <span class="ot">-&gt;</span> <span class="dt">Game</span> <span class="ot">-&gt;</span> ([<span class="dt">Item</span>], <span class="dt">Game</span>)</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="ot">popItem ::</span> <span class="dt">Item</span>   <span class="ot">-&gt;</span> <span class="dt">Game</span> <span class="ot">-&gt;</span> ((),     <span class="dt">Game</span>)</a>
<a class="sourceLine" id="cb16-4" title="4"><span class="ot">heal    ::</span> <span class="dt">Int</span>    <span class="ot">-&gt;</span> <span class="dt">Game</span> <span class="ot">-&gt;</span> ((),     <span class="dt">Game</span>)</a></code></pre></div>
</div>
<div id="state-2" class="slide section level1">
<h1>State</h1>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb17-1" title="1"><span class="co">-- Haskell</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="ot">tryToHeal ::</span> <span class="dt">Game</span> <span class="ot">-&gt;</span> (<span class="dt">Bool</span>, <span class="dt">Game</span>)</a>
<a class="sourceLine" id="cb17-3" title="3">tryToHeal <span class="ot">=</span> runState <span class="op">$</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb17-4" title="4">  xs <span class="ot">&lt;-</span> items</a>
<a class="sourceLine" id="cb17-5" title="5">  <span class="kw">case</span> <span class="fu">filter</span> isPotion xs <span class="kw">of</span></a>
<a class="sourceLine" id="cb17-6" title="6">    (potion<span class="op">:</span> _) <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb17-7" title="7">      popItem potion</a>
<a class="sourceLine" id="cb17-8" title="8">      heal (getHP potion)</a>
<a class="sourceLine" id="cb17-9" title="9">      <span class="fu">return</span> <span class="dt">True</span></a>
<a class="sourceLine" id="cb17-10" title="10">    _           <span class="ot">-&gt;</span></a>
<a class="sourceLine" id="cb17-11" title="11">      <span class="fu">return</span> <span class="dt">False</span></a></code></pre></div>
</div>
<div id="middleware" class="slide section level1">
<h1>Middleware</h1>
<h2 id="middleware-оборачиваем-функции-в-функции">Middleware — оборачиваем функции в функции</h2>
</div>
<div id="middleware-1" class="slide section level1">
<h1>Middleware</h1>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">type</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="ot">=</span>  <span class="dt">Request</span></a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="ot">-&gt;</span> (<span class="dt">Response</span> <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">ResponseReceived</span>)</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="ot">-&gt;</span> <span class="dt">IO</span> <span class="dt">ResponseReceived</span></a>
<a class="sourceLine" id="cb18-5" title="5"></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="kw">type</span> <span class="dt">Middleware</span></a>
<a class="sourceLine" id="cb18-7" title="7">  <span class="ot">=</span> <span class="dt">Application</span> <span class="ot">-&gt;</span> <span class="dt">Application</span></a></code></pre></div>
</div>
<div id="middleware-2" class="slide section level1">
<h1>Middleware</h1>
<div class="sourceCode" id="cb19"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb19-1" title="1"><span class="ot">app ::</span> <span class="dt">Application</span></a>
<a class="sourceLine" id="cb19-2" title="2">app req respond <span class="ot">=</span></a>
<a class="sourceLine" id="cb19-3" title="3">  respond <span class="op">$</span> responseLBS status200 [] <span class="st">&quot;Hello!&quot;</span></a>
<a class="sourceLine" id="cb19-4" title="4"></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="ot">withLogging ::</span> <span class="dt">Middleware</span></a>
<a class="sourceLine" id="cb19-6" title="6">withLogging app req respond <span class="ot">=</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb19-7" title="7">  <span class="co">-- log request</span></a>
<a class="sourceLine" id="cb19-8" title="8">  app req <span class="op">$</span> \respocse <span class="ot">-&gt;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb19-9" title="9">    <span class="co">-- log response</span></a>
<a class="sourceLine" id="cb19-10" title="10">    respond response</a></code></pre></div>
</div>
<div id="а-ещё-у-нас-есть" class="slide section level1">
<h1>А ещё у нас есть</h1>
<ul>
<li>Моноид</li>
<li>Функтор</li>
<li>Аппликативный функтор</li>
<li>Монада</li>
<li>Свободная монада</li>
<li>Свободнейшая монада</li>
<li>…</li>
</ul>
</div>
<div id="конец" class="slide section level1">
<h1>Конец</h1>
<h2 id="всем-спасибо">Всем спасибо!</h2>
</div>
</body>
</html>
